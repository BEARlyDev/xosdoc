<!DOCTYPE html>

<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->

<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
	<meta charset="UTF-8">
	
	<!-- Remove this line if you use the .htaccess -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<meta name="viewport" content="width=device-width">
	
	<meta name="description" content="Designa Studio, a HTML5 / CSS3 template.">
	<meta name="author" content="Sylvain Lafitte, Web Designer, sylvainlafitte.com">
	
	<title>Documentation // eXperimental Operating System</title>
	
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
	<link rel="shortcut icon" type="image/png" href="favicon.png">
	
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/style.css">
	
	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>



<body>
<!-- Prompt IE 7 users to install Chrome Frame -->
<!--[if lt IE 8]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

<div class="container">

	<header id="navtop">
		<a href="index.html" class="logo fleft">
			<img src="img/logo.png" alt="Designa Studio">
		</a>
		
		<nav class="fright">
			<ul><li><a href="index.html" >Home</a></li>
				<li><a href="about.html">About</a></li>
				<li><a href="documentation.html" class="navactive">Documentation</a></li>
				<li><a href="downloads.html">Downloads</a></li>
				<li><a href="roadmap.html">Roadmap</a></li></ul>
			</ul>
		</nav>
	</header>


	<div class="services-page main grid-wrap">

		<header class="grid col-full">
			<hr>
			<p class="fleft">File System (XFS)</p>
		</header>


		<aside class="grid col-one-quarter mq2-col-full">
		
			<menu>
				<ul>
					<li><a href="#navintro" class="sec" >Introduction</a></li>
							<li><a href="#navintro" class="subsec" >Brief Machine Description</a></li>
							<li><a href="#navcomp" class="subsec" >Components of the Machine</a></li>
							<li><a href="#navdatatype" class="subsec" >Supported Datatypes</a></li>
					<li><a href="#navreg" class="sec">Registers</a></li>
							<li><a href="#navreg" class="subsec" >Introduction</a></li>
							<li><a href="#navregset" class="subsec" >Register Set</a></li>
					<li><a href="#navmem" class="sec">Memory</a></li>
							<li><a href="#navmemintro" class="subsec" > Introduction</a></li>
							<li><a href="#navaddr" class="subsec" > Address Translation</a></li>
							<li><a href="#navrom" class="subsec" > ROM Code</a></li>
					<li><a href="#navdisk" class="sec" >Disk Storage</a></li>		
					<li><a href="#navinstr" class="sec" >Instructions</a></li>		
							<li><a href="#navinstrintro" class="subsec" > Introduction</a></li>
							<li><a href="#navclassf" class="subsec" > Classification</a></li>
							<li><a href="#navmodes" class="subsec" > Privilege Modes</a></li>
					<li><a href="#navintrrupt" class="sec" >Interrupts</a></li>
							<li><a href="#navexcep" class="subsec" > Exceptions</a></li>
							<li><a href="#navtimer" class="subsec" > Timer Interrupt</a></li>
							<li><a href="#navsoft" class="subsec" > Software Interrupt</a></li>
				</ul>
			</menu>
		</aside>
		
		<section class="grid col-three-quarters mq2-col-full">
		
			
			
			<div class="grid-wrap">
			
			<article  id="navintro" class="grid col-full">
				<h2>Introduction</h2>
				<h4>Brief Machine Description</h4>
				<p>
				The machine simulator is known as Experimental String Machine (XSM).
				It is an interrupt driven uniprocessor machine. The machine handles data as strings. 
				A string is a sequence of characters terminated by ’\0’. 
				The length of a string is at most 16 characters including ’\0’. 
				Each of these strings is stored in a <b>word</b>. <a href="#navmem" class="sec">(Refer Section : Memory)</a>
				The machine interprets a single character also as a string.

				</p>
			</article>
			
			
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>			
			
			<article  id="navcomp" class="grid col-full">
				<h4>Components of the Machine</h4>
				<ul style="list-style-type:disc">
					<li><p> <b>Disk</b> : It is a non-volatile storage that stores user programs (executables) and data files. 
							The Operating System code is also stored in the disk. </p></li>
					<li><p> <b>Memory</b> : It is a volatile storage that stores the programs to be run on the machine as well as the operating system that manages the various programs.</p></li>
					<li><p> <b>Processor</b> : It is the main computational unit that is used to execute the instructions. </p></li>
					<li><p> <b>Timer</b> : It is a device that interrupts the processor after a pre-defined specific time interval. </p></li>
					<li><p> <b>Load/Store</b> : It is a macro that performs the functionalities of DMA (Direct Memory Access) controller. <a href="#navinstr" class="sec" >(Refer Section : Instructions)</a> </p></li>
				</ul>
			<img src="doc/block.png" width="20%" />	
			</article>
			
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>	
			
			<br/>
			<article  id="navdatatype" class="grid col-full">
				<h4>Supported Datatypes</h4>
				<p>XSM supports 2 different datatypes and their operations, namely <b>Strings</b> and <b>Integers</b>. 
				However in the lowest level both integers and strings are internally stored as strings.</p>
				<ul style="list-style-type:disc">
					<li><p> <b>Strings</b> :<br/>Strings are sequence of characters which may include alphabets, numerals and special characters. 
					        Every string is terminated with a <i>null character</i> (’\0’). 
					        Operations that can be performed on strings include lexicographic comparisons. </p></li>
					<li><p> <b>Integers</b> :<br/>Apart from strings, XSM supports integers and its operations. 
							The operations that can be performed on integers include arithmetic operations and comparison operations. 
							A jump can also performed by checking if a register has 0 in it. </p></li>
				</ul>
			</article>
			
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>	
			
			<article  id="navreg" class="grid col-full">
				<h2>Registers</h2>
				<h4>Introduction</h4>
				<p>
				The XSM architecture maintains 26 registers (each one <b>word</b>).
				</p>
			</article>
			
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>
			
			<article  id="navregset" class="grid col-full">
				<h4>Register Set</h4>
				<p>
				There are 16 General Purpose Registers (GPR), R0 - R15, of which R0 - R7 are Program Registers and R8 - R15 are Kernel Registers. 
				There are 4 temporary registers T0 - T3 which are reserved for code translation. 
				The registers T0 - T3 are not intended to be used by the system programmer.
				In addition to these 20 registers there are 6 Special Purpose Registers(SPR) namely BP (Base Pointer), SP (Stack Pointer), 
				IP (Instruction Pointer), PTBR (Page Table Base Register) and PTLR (Page Table Length Register) and the EFR (Exception Flag Register).
				</p>
				
				<table class="doctable">
					<tr> <th>Name</th> <th>Register</th> </tr>
					<tr> <td>Program Registers</td> <td>R0 - R7</td> </tr>
					<tr> <td>Kernel Registers</td> <td>R8 - R15</td> </tr>
					<tr> <td>Temporary Registers</td> <td>T0 - T3</td> </tr>
					<tr> <td>Base Pointer</td> <td>BP </td> </tr>
					<tr> <td>Stack Pointer</td> <td>SP</td> </tr>
					<tr> <td>Instruction Pointer</td> <td>IP </td> </tr>
					<tr> <td>Page Table Base Register</td> <td>PTBR </td> </tr>
					<tr> <td>Page Table Length Register</td> <td>PTLR </td> </tr>
					<tr> <td>Exception Flag Register</td> <td>EFR </td> </tr>
				</table>
			</article>
			
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>
			
			
			<article id="navmem" class="grid col-full">			
				<h2>Memory</h2>
				<h4>Introduction</h4>
				
				<ul style="list-style-type:disc">
					<li> <p> The basic unit of memory in XSM is a <b>word</b> (length = 16 bytes).  </p> </li>
					<li> <p> The machine memory can be thought of as a linear sequence of <b>words</b>. </p> </li>
					<li> <p> A collection of 512 contiguous <b>words</b> is known as a <b>page</b>. </p> </li>
					<li> <p> The total size of the memory is 64 <b>pages</b> or 32768 (512 × 64) <b>words</b>. </p> </li>
					<li> <p> Each <b>word</b> in the memory is identified by the <i>word address</i> in the range 0 to 32767. 
							Similarly, each <b>page</b> in the memory is identified by the <i>page number</i> in the range 0 to 63. </p> </li>
					<li> <p> The page number corresponding to a word is obtained by the formula, <i>page number</i> = floor(<i>word address</i>/512)</p> </li>
				</ul>
			</article>
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>

			<article id="navaddr" class="grid col-full">
				<h4>Address Translation</h4>
				<p>
				There are two kinds of memory addresses,
				</p>
				<ul style="list-style-type:disc">
					<li><p> Logical address : When a process runs, CPU generates address for the data accessed by this process. 
							This address is called the Logical address. </p></li>
					<li><p> Physical address : It is the actual location of the data in the main memory. </p></li>
				</ul>
				<p>
				Address translation is the process of obtaining the physical address from the logical address. 
				It is done by the machine in the following way.
				</p>
				
				<ol style="list-style-type:decimal">
					<li><p> The logical address generated by the CPU is divided by the page size (512) to get the <b>logical page number</b>. 
							The remainder is the <b>offset</b> of the data within that page.</p></li>
					<li><p> A <b>page table</b> is used for address translation. 
							It resides in the memory, the location of which is pointed to by <b>PTBR</b> (Page Table Base Register ). 
							The number of entries in the page table is stored in <b>PTLR</b> (Page Table Length Register). 
							Each entry of the page table is two words long.
							<ul>
								<li><p> First word contains physical page number corresponding to a logical page number.</p></li>
								<li><p> The second word can be used as flags. 
										The first two positions in this word is used as <i>valid/invalid</i> bit (if the entry is a valid 
										physical memory location or not) and <i>reference bit</i> (its set to 1 every time a page is accessed) respectively.</p></li>
							</ul>
						<p>The logical page number is used to index the page table to get the corresponding physical page number.</p>
							
 					</p></li>
					<li><p>The <b>offset</b> is then used to refer to the word in the physical page containing the data. </p></li>
				</ol>
				</br>
				<p>The example below shows the address translation corresponding to the logical address 13532.</p>

				<img src="doc/address_translation.png" width="20%" />	
			</article>
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>
			
			<article id="navrom" class="grid col-full">			
				<h4>ROM Code</h4>
				<p>
				It is a hard coded assembly level code present in page 0 of the memory.
				It is known as the ROM (Read Only Memory) code because in an actual machine it is burnt in the hardware. 
				When the machine boots up, this code is executed. 
				This code has the basic functionality of loading block 0 of the disk (which generally contains the OS startup code) 
				into page 1 of the memory and to set the IP register value to 512.
				</p>
			</article>
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>
			
			
			<article id="navfile" class="grid col-full">			
				<h2>File</h2>
				<p>A file is a collection of blocks identified by a name. 
				Every file in the disk has a <i>Basic Block</i> and several <i>Data Blocks</i>. 
				They are defined as follows:</p>
				<ul style="list-style-type:disc">
					<li><p> <b>Data Blocks</b> : These blocks contain the actual data of a file. </p></li>
					<li><p> <b>Basic Block</b> : It consists of information about the data in a file. </p>
						<table class="doctable">
							<tr> <td><b>Index</b></td> <td> 0--255 </td><td> 256--511 </td></tr>
							<tr> <td><b>Content</b></td> <td> Block List </td><td> Header </td></tr>
						</table>
						<br/>
						<ul>
							<li> <b>Block List</b> : It contains block addresses of all data blocks in the file.
								<ul>
									<li>The block list consists of 256 entries.</li>
									<li>Each entry is of size one word.</li>
									<li>The value contained in an entry of the block list gives the	block number of the corresponding data block in the disk.
									All invalid entries are marked with 0.</li>
								</ul>
							</li>
							<li> <b>Header</b>  The header contains the meta information relating to the file. The header fields is 256 words long. It can be used to store details like permissions, ownership etc related to a file, similar to inode in Linux and UNIX operating systems. However XOS does not use the header field.
							</li>
						</ul>
					</li>
				</ul>
				<img src="doc/address_translation.png" width="20%" />
				<br/><b> Example </b>
				<ul>
					<li>Consider the example illustrated by figure 3. From the figure, we infer the following.</li>
					<li>The zeroth data block of the file resides in the disk in block number 240</li>
					<li>The first data block of the file resides in the disk in block number 420. The second data block of the file resides in the disk in block number  The third data block of the file resides in the disk in block number 315 </li>
					<li> There are no more data blocks for the file. So rest of the entries of the
basic block are marked as 0 </li>
				</ul>
				<h3>File Types</h3>
				There are two types of files in the XSM architecture. They are:
				<br/>
				<h5>Data files</h5>
					These files contain data or information that is used by the programs. They can occupy a maximum of 257 blocks (1  basic block + maximum 256 data blocks). Data files have an extension <b>.dat</b> in the filename.

				<h5>Executable files</h5>
					These contain programs that the user wishes to run on the machine. They occupy 4 blocks (1 basic block + 3 data blocks) of the disk. Executable files have an extension .xsm in the filename.
			</article>
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>



			<div class="up grid col-one-third ">
			<a href="#navtop" title="Go back up">&uarr;</a>
			</div>
			<article id="navfat" class="grid col-full">		
			<h2>File Allocation Table (FAT)</h2> 
			File allocation table (FAT) is a table that has an entry for each file present in the disk. FAT of the filesystem consists of 64 entries. Thus there can be a maximum of 64 files.
			<ul>
			<li<Each entry is of size 8 words. </li>
			<li>Total size of the FAT is thus 512 words, which occupies 1 block.</li>
			<li>It is a disk data structure and occupies block number 10 on the disk.</li>
			</ul>
				<h4>Structure of FAT</h4>
				The structure of a FAT entry is shown below: <br/>
				<table class="doctable">
				<tr><th>0</th><th>1</th><th>2</th><th>3  - 7</th> </tr>
				<tr><td> File Name </td> <td> File Size </td> <td> Block# of Basic Block </td> <td> ... </td> </tr>
				<tr></tr>
				</table>

				<br/><br/>
				The FAT entry consists of  <br/>
				1. <b>File Name</b> : It is an identification of a file. It can be of maxi-
				mum 15 characters (and thus requires 1 word). Typical file names are
				student.dat, calc.xsm.
				<br/>
				2. <b>File Size</b> : It indicates the number of words required for the data
				blocks of the file. The number of data blocks of the file can vary from
				0 to 256, and so the maximum file size is 131072 words (256 × 512).
				It occupies one word in the FAT entry. <br/>
				3. <b>Block number of basic block</b> : It contains the block number where
				the basic block of a file resides in the disk. It occupies one word in the
				FAT entry.
			</article>
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>

			<article id="navdfl"  class="grid col-full">			
		<h2>Disk Free List</h2>
			The Disk Free List is a data structure used for keeping tracking of unused blocks in the disk.
			<ul>
			<li>The Free List of the disk consists of 512 entries. Each entry is of size
			one word.</li>
			<li>The size of the free list is thus 1 block or 512 words.<li>
			<li>It is present in blocks 11 of the disk. Refer figure 1.</li>
			<li>For each block in the disk there is an entry in the Disk Free List which
			contains a value of either 0 or 1 indicating whether the corresponding
			block in the disk is free or used respectively. Each entry in the Disk
			Free List is of size one word.</li>
			<li>Blocks 0 to 12 are system reserved and are marked as 1 in the Disk
			Free List so that they cannot be used for saving user files. The file
			system also ensures that user files are not stored on the Swap Area.</li>
			</ul>
			</article>
			<div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top &uarr;</a>
			</div>
			</div> <!-- 100%articles-->

		
		</section>	
		
		
		
	</div> <!--main-->

<div class="divide-top">
	<footer class="grid-wrap">
		<ul class="grid col-one-third social">
			<li><a href="http://github.com/XOS-NITC">Github</a></li>
		</ul>
	
		<div class="up grid col-one-third ">
			<a href="#navtop" title="Go back up">&uarr;</a>
		</div>
		
		<nav class="grid col-one-third ">
			<ul><li><a href="index.html" >Home</a></li>
				<li><a href="about.html">About</a></li>
				<li><a href="documentation.html">Documentation</a></li>
				<li><a href="downloads.html">Downloads</a></li>
				<li><a href="roadmap.html">Roadmap</a></li></ul>
			</ul>
		</nav>
	</footer>
</div>

</div>

<!-- Javascript - jQuery -->
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>')</script>

<!--[if (gte IE 6)&(lte IE 8)]>
<script src="js/selectivizr.js"></script>
<![endif]-->

<script src="js/scripts.js"></script>

<!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID. -->
<script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>
